"use strict";(self.webpackChunkrc_tree=self.webpackChunkrc_tree||[]).push([[268],{48092:function(cn,it,b){b.d(it,{OF:function(){return Ke},ZP:function(){return rn}});var st=b(31468),ke=b.n(st),lt=b(82242),L=b.n(lt),ct=b(37205),q=b.n(ct),ut=b(82100),Re=b.n(ut),ft=b(29186),Ae=b.n(ft),vt=b(13720),x=b.n(vt),pt=b(80619),je=b.n(pt),ht=b(47074),Fe=b.n(ht),gt=b(85573),h=b.n(gt),yt=b(92310),B=b.n(yt),ne=b(76507),Ze=b(53863),X=b(14097),R=b(71062),me=R.createContext(null),Kt=R.createContext({}),M=b(99678);function xt(a){var i=a.dropPosition,f=a.dropLevelOffset,e=a.indent,d={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(i){case-1:d.top=0,d.left=-f*e;break;case 1:d.bottom=0,d.left=-f*e;break;case 0:d.bottom=0,d.left=e;break}return(0,M.jsx)("div",{style:d})}var Nt=b(70236),He=b.n(Nt),kt=b(79800),_=b.n(kt),mt=b(39647),he=b.n(mt),ge=b(826),Ct=b(34872),Et=b(44516),Dt=function(i){for(var f=i.prefixCls,e=i.level,d=i.isStart,c=i.isEnd,v="".concat(f,"-indent-unit"),t=[],n=0;n<e;n+=1)t.push((0,M.jsx)("span",{className:B()(v,h()(h()({},"".concat(v,"-start"),d[n]),"".concat(v,"-end"),c[n]))},n));return(0,M.jsx)("span",{"aria-hidden":"true",className:"".concat(f,"-indent"),children:t})},bt=R.memo(Dt);function H(a,i){return a[i]}var St=b(90986),Pt=b(81304),Tt=["children"];function Ue(a,i){return"".concat(a,"-").concat(i)}function Ot(a){return a&&a.type&&a.type.isTreeNode}function se(a,i){return a!=null?a:i}function ye(a){var i=a||{},f=i.title,e=i._title,d=i.key,c=i.children,v=f||"title";return{title:v,_title:e||[v],key:d||"key",children:c||"children"}}function un(a,i){var f=new Map;function e(d){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(d||[]).forEach(function(v){var t=v[i.key],n=v[i.children];warning(t!=null,"Tree node must have a certain key: [".concat(c).concat(t,"]"));var r=String(t);warning(!f.has(r)||t===null||t===void 0,"Same 'key' exist in the Tree: ".concat(r)),f.set(r,!0),e(n,"".concat(c).concat(r," > "))})}e(a)}function Lt(a){function i(f){var e=(0,St.Z)(f);return e.map(function(d){if(!Ot(d))return(0,X.ZP)(!d,"Tree/TreeNode can only accept TreeNode as children."),null;var c=d.key,v=d.props,t=v.children,n=he()(v,Tt),r=L()({key:c},n),o=i(t);return o.length&&(r.children=o),r}).filter(function(d){return d})}return i(a)}function Ce(a,i,f){var e=ye(f),d=e._title,c=e.key,v=e.children,t=new Set(i===!0?[]:i),n=[];function r(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return o.map(function(l,p){for(var g=Ue(s?s.pos:"0",p),y=se(l[c],g),u,K=0;K<d.length;K+=1){var m=d[K];if(l[m]!==void 0){u=l[m];break}}var N=Object.assign((0,Pt.Z)(l,[].concat(q()(d),[c,v])),{title:u,key:y,parent:s,pos:g,children:null,data:l,isStart:[].concat(q()(s?s.isStart:[]),[p===0]),isEnd:[].concat(q()(s?s.isEnd:[]),[p===o.length-1])});return n.push(N),i===!0||t.has(y)?N.children=r(l[v]||[],N):N.children=[],N})}return r(a),n}function Mt(a,i,f){var e={};ke()(f)==="object"?e=f:e={externalGetKey:f},e=e||{};var d=e,c=d.childrenPropName,v=d.externalGetKey,t=d.fieldNames,n=ye(t),r=n.key,o=n.children,s=c||o,l;v?typeof v=="string"?l=function(y){return y[v]}:typeof v=="function"&&(l=function(y){return v(y)}):l=function(y,u){return se(y[r],u)};function p(g,y,u,K){var m=g?g[s]:a,N=g?Ue(u.pos,y):"0",k=g?[].concat(q()(K),[g]):[];if(g){var C=l(g,N),D={node:g,index:y,pos:N,key:C,parentPos:u.node?u.pos:null,level:u.level+1,nodes:k};i(D)}m&&m.forEach(function(T,E){p(T,E,{node:g,pos:N,level:u?u.level+1:-1},k)})}p(null)}function wt(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=i.initWrapper,e=i.processEntity,d=i.onProcessFinished,c=i.externalGetKey,v=i.childrenPropName,t=i.fieldNames,n=arguments.length>2?arguments[2]:void 0,r=c||n,o={},s={},l={posEntities:o,keyEntities:s};return f&&(l=f(l)||l),Mt(a,function(p){var g=p.node,y=p.index,u=p.pos,K=p.key,m=p.parentPos,N=p.level,k=p.nodes,C={node:g,nodes:k,index:y,key:K,pos:u,level:N},D=se(K,u);o[u]=C,s[D]=C,C.parent=o[m],C.parent&&(C.parent.children=C.parent.children||[],C.parent.children.push(C)),e&&e(C,l)},{externalGetKey:r,childrenPropName:v,fieldNames:t}),d&&d(l),l}function le(a,i){var f=i.expandedKeys,e=i.selectedKeys,d=i.loadedKeys,c=i.loadingKeys,v=i.checkedKeys,t=i.halfCheckedKeys,n=i.dragOverNodeKey,r=i.dropPosition,o=i.keyEntities,s=H(o,a),l={eventKey:a,expanded:f.indexOf(a)!==-1,selected:e.indexOf(a)!==-1,loaded:d.indexOf(a)!==-1,loading:c.indexOf(a)!==-1,checked:v.indexOf(a)!==-1,halfChecked:t.indexOf(a)!==-1,pos:String(s?s.pos:""),dragOver:n===a&&r===0,dragOverGapTop:n===a&&r===-1,dragOverGapBottom:n===a&&r===1};return l}function A(a){var i=a.data,f=a.expanded,e=a.selected,d=a.checked,c=a.loaded,v=a.loading,t=a.halfChecked,n=a.dragOver,r=a.dragOverGapTop,o=a.dragOverGapBottom,s=a.pos,l=a.active,p=a.eventKey,g=L()(L()({},i),{},{expanded:f,selected:e,checked:d,loaded:c,loading:v,halfChecked:t,dragOver:n,dragOverGapTop:r,dragOverGapBottom:o,pos:s,active:l,key:p});return"props"in g||Object.defineProperty(g,"props",{get:function(){return(0,X.ZP)(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),a}}),g}var $t=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],Ge="open",We="close",It="---",Rt=function(a){je()(f,a);var i=Fe()(f);function f(){var e;Re()(this,f);for(var d=arguments.length,c=new Array(d),v=0;v<d;v++)c[v]=arguments[v];return e=i.call.apply(i,[this].concat(c)),h()(x()(e),"state",{dragNodeHighlight:!1}),h()(x()(e),"selectHandle",void 0),h()(x()(e),"cacheIndent",void 0),h()(x()(e),"onSelectorClick",function(t){var n=e.props.context.onNodeClick;n(t,A(e.props)),e.isSelectable()?e.onSelect(t):e.onCheck(t)}),h()(x()(e),"onSelectorDoubleClick",function(t){var n=e.props.context.onNodeDoubleClick;n(t,A(e.props))}),h()(x()(e),"onSelect",function(t){if(!e.isDisabled()){var n=e.props.context.onNodeSelect;n(t,A(e.props))}}),h()(x()(e),"onCheck",function(t){if(!e.isDisabled()){var n=e.props,r=n.disableCheckbox,o=n.checked,s=e.props.context.onNodeCheck;if(!(!e.isCheckable()||r)){var l=!o;s(t,A(e.props),l)}}}),h()(x()(e),"onMouseEnter",function(t){var n=e.props.context.onNodeMouseEnter;n(t,A(e.props))}),h()(x()(e),"onMouseLeave",function(t){var n=e.props.context.onNodeMouseLeave;n(t,A(e.props))}),h()(x()(e),"onContextMenu",function(t){var n=e.props.context.onNodeContextMenu;n(t,A(e.props))}),h()(x()(e),"onDragStart",function(t){var n=e.props.context.onNodeDragStart;t.stopPropagation(),e.setState({dragNodeHighlight:!0}),n(t,x()(e));try{t.dataTransfer.setData("text/plain","")}catch(r){}}),h()(x()(e),"onDragEnter",function(t){var n=e.props.context.onNodeDragEnter;t.preventDefault(),t.stopPropagation(),n(t,x()(e))}),h()(x()(e),"onDragOver",function(t){var n=e.props.context.onNodeDragOver;t.preventDefault(),t.stopPropagation(),n(t,x()(e))}),h()(x()(e),"onDragLeave",function(t){var n=e.props.context.onNodeDragLeave;t.stopPropagation(),n(t,x()(e))}),h()(x()(e),"onDragEnd",function(t){var n=e.props.context.onNodeDragEnd;t.stopPropagation(),e.setState({dragNodeHighlight:!1}),n(t,x()(e))}),h()(x()(e),"onDrop",function(t){var n=e.props.context.onNodeDrop;t.preventDefault(),t.stopPropagation(),e.setState({dragNodeHighlight:!1}),n(t,x()(e))}),h()(x()(e),"onExpand",function(t){var n=e.props,r=n.loading,o=n.context.onNodeExpand;r||o(t,A(e.props))}),h()(x()(e),"setSelectHandle",function(t){e.selectHandle=t}),h()(x()(e),"getNodeState",function(){var t=e.props.expanded;return e.isLeaf()?null:t?Ge:We}),h()(x()(e),"hasChildren",function(){var t=e.props.eventKey,n=e.props.context.keyEntities,r=H(n,t)||{},o=r.children;return!!(o||[]).length}),h()(x()(e),"isLeaf",function(){var t=e.props,n=t.isLeaf,r=t.loaded,o=e.props.context.loadData,s=e.hasChildren();return n===!1?!1:n||!o&&!s||o&&r&&!s}),h()(x()(e),"isDisabled",function(){var t=e.props,n=t.disabled,r=t.data,o=e.props,s=o.context.disabled,l=o.unstableContext.nodeDisabled;return!!(s||n||l&&l(r))}),h()(x()(e),"isCheckable",function(){var t=e.props.checkable,n=e.props.context.checkable;return!n||t===!1?!1:n}),h()(x()(e),"syncLoadData",function(t){var n=t.expanded,r=t.loading,o=t.loaded,s=e.props.context,l=s.loadData,p=s.onNodeLoad;r||l&&n&&!e.isLeaf()&&!o&&p(A(e.props))}),h()(x()(e),"isDraggable",function(){var t=e.props,n=t.data,r=t.context.draggable;return!!(r&&(!r.nodeDraggable||r.nodeDraggable(n)))}),h()(x()(e),"renderDragHandler",function(){var t=e.props.context,n=t.draggable,r=t.prefixCls;return n!=null&&n.icon?(0,M.jsx)("span",{className:"".concat(r,"-draggable-icon"),children:n.icon}):null}),h()(x()(e),"renderSwitcherIconDom",function(t){var n=e.props.switcherIcon,r=e.props.context.switcherIcon,o=n||r;return typeof o=="function"?o(L()(L()({},e.props),{},{isLeaf:t})):o}),h()(x()(e),"renderSwitcher",function(){var t=e.props.expanded,n=e.props.context.prefixCls;if(e.isLeaf()){var r=e.renderSwitcherIconDom(!0);return r!==!1?(0,M.jsx)("span",{className:B()("".concat(n,"-switcher"),"".concat(n,"-switcher-noop")),children:r}):null}var o=B()("".concat(n,"-switcher"),"".concat(n,"-switcher_").concat(t?Ge:We)),s=e.renderSwitcherIconDom(!1);return s!==!1?(0,M.jsx)("span",{onClick:e.onExpand,className:o,children:s}):null}),h()(x()(e),"renderCheckbox",function(){var t=e.props,n=t.checked,r=t.halfChecked,o=t.disableCheckbox,s=t.title,l=e.props.context.prefixCls,p=e.isDisabled(),g=e.isCheckable();if(!g)return null;var y=typeof g!="boolean"?g:null;return(0,M.jsx)("span",{className:B()("".concat(l,"-checkbox"),n&&"".concat(l,"-checkbox-checked"),!n&&r&&"".concat(l,"-checkbox-indeterminate"),(p||o)&&"".concat(l,"-checkbox-disabled")),onClick:e.onCheck,role:"checkbox","aria-checked":r?"mixed":n,"aria-disabled":p||o,"aria-label":"Select ".concat(typeof s=="string"?s:"tree node"),children:y})}),h()(x()(e),"renderIcon",function(){var t=e.props.loading,n=e.props.context.prefixCls;return(0,M.jsx)("span",{className:B()("".concat(n,"-iconEle"),"".concat(n,"-icon__").concat(e.getNodeState()||"docu"),t&&"".concat(n,"-icon_loading"))})}),h()(x()(e),"renderSelector",function(){var t=e.state.dragNodeHighlight,n=e.props,r=n.title,o=r===void 0?It:r,s=n.selected,l=n.icon,p=n.loading,g=n.data,y=e.props.context,u=y.prefixCls,K=y.showIcon,m=y.icon,N=y.loadData,k=y.titleRender,C=e.isDisabled(),D="".concat(u,"-node-content-wrapper"),T;if(K){var E=l||m;T=E?(0,M.jsx)("span",{className:B()("".concat(u,"-iconEle"),"".concat(u,"-icon__customize")),children:typeof E=="function"?E(e.props):E}):e.renderIcon()}else N&&p&&(T=e.renderIcon());var S;typeof o=="function"?S=o(g):k?S=k(g):S=o;var P=(0,M.jsx)("span",{className:"".concat(u,"-title"),children:S});return(0,M.jsxs)("span",{ref:e.setSelectHandle,title:typeof o=="string"?o:"",className:B()("".concat(D),"".concat(D,"-").concat(e.getNodeState()||"normal"),!C&&(s||t)&&"".concat(u,"-node-selected")),onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onContextMenu:e.onContextMenu,onClick:e.onSelectorClick,onDoubleClick:e.onSelectorDoubleClick,children:[T,P,e.renderDropIndicator()]})}),h()(x()(e),"renderDropIndicator",function(){var t=e.props,n=t.disabled,r=t.eventKey,o=e.props.context,s=o.draggable,l=o.dropLevelOffset,p=o.dropPosition,g=o.prefixCls,y=o.indent,u=o.dropIndicatorRender,K=o.dragOverNodeKey,m=o.direction,N=!!s,k=!n&&N&&K===r,C=y!=null?y:e.cacheIndent;return e.cacheIndent=y,k?u({dropPosition:p,dropLevelOffset:l,indent:C,prefixCls:g,direction:m}):null}),e}return Ae()(f,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var d=this.props.selectable,c=this.props.context.selectable;return typeof d=="boolean"?d:c}},{key:"render",value:function(){var d,c=this.props,v=c.eventKey,t=c.className,n=c.style,r=c.dragOver,o=c.dragOverGapTop,s=c.dragOverGapBottom,l=c.isLeaf,p=c.isStart,g=c.isEnd,y=c.expanded,u=c.selected,K=c.checked,m=c.halfChecked,N=c.loading,k=c.domRef,C=c.active,D=c.data,T=c.onMouseMove,E=c.selectable,S=he()(c,$t),P=this.props.context,O=P.prefixCls,w=P.filterTreeNode,$=P.keyEntities,j=P.dropContainerKey,F=P.dropTargetKey,Z=P.draggingNodeKey,I=this.isDisabled(),V=(0,Ze.Z)(S,{aria:!0,data:!0}),Q=H($,v)||{},ce=Q.level,ue=g[g.length-1],W=this.isDraggable(),te=!I&&W,Y=Z===v,re=E!==void 0?{"aria-selected":!!E}:void 0;return(0,M.jsxs)("div",L()(L()(L()({ref:k,role:"treeitem","aria-expanded":l?void 0:y,className:B()(t,"".concat(O,"-treenode"),(d={},h()(h()(h()(h()(h()(h()(h()(h()(h()(h()(d,"".concat(O,"-treenode-disabled"),I),"".concat(O,"-treenode-switcher-").concat(y?"open":"close"),!l),"".concat(O,"-treenode-checkbox-checked"),K),"".concat(O,"-treenode-checkbox-indeterminate"),m),"".concat(O,"-treenode-selected"),u),"".concat(O,"-treenode-loading"),N),"".concat(O,"-treenode-active"),C),"".concat(O,"-treenode-leaf-last"),ue),"".concat(O,"-treenode-draggable"),W),"dragging",Y),h()(h()(h()(h()(h()(h()(d,"drop-target",F===v),"drop-container",j===v),"drag-over",!I&&r),"drag-over-gap-top",!I&&o),"drag-over-gap-bottom",!I&&s),"filter-node",w&&w(A(this.props))))),style:n,draggable:te,onDragStart:te?this.onDragStart:void 0,onDragEnter:W?this.onDragEnter:void 0,onDragOver:W?this.onDragOver:void 0,onDragLeave:W?this.onDragLeave:void 0,onDrop:W?this.onDrop:void 0,onDragEnd:W?this.onDragEnd:void 0,onMouseMove:T},re),V),{},{children:[(0,M.jsx)(bt,{prefixCls:O,level:ce,isStart:p,isEnd:g}),this.renderDragHandler(),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector()]}))}}]),f}(R.Component),Ee=function(i){return(0,M.jsx)(me.Consumer,{children:function(e){return(0,M.jsx)(Kt.Consumer,{children:function(c){return(0,M.jsx)(Rt,L()(L()({},i),{},{context:e,unstableContext:c}))}})}})};Ee.displayName="TreeNode",Ee.isTreeNode=1;var Ke=Ee;function At(a,i){var f=R.useState(!1),e=_()(f,2),d=e[0],c=e[1];(0,ge.ZP)(function(){if(d)return a(),function(){i()}},[d]),(0,ge.ZP)(function(){return c(!0),function(){c(!1)}},[])}var jt=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],Be=function(i,f){var e=i.className,d=i.style,c=i.motion,v=i.motionNodes,t=i.motionType,n=i.onMotionStart,r=i.onMotionEnd,o=i.active,s=i.treeNodeRequiredProps,l=he()(i,jt),p=R.useState(!0),g=_()(p,2),y=g[0],u=g[1],K=R.useContext(me),m=K.prefixCls,N=v&&t!=="hide";(0,ge.ZP)(function(){v&&N!==y&&u(N)},[v]);var k=function(){v&&n()},C=R.useRef(!1),D=function(){v&&!C.current&&(C.current=!0,r())};At(k,D);var T=function(S){N===S&&D()};return v?(0,M.jsx)(Et.ZP,L()(L()({ref:f,visible:y},c),{},{motionAppear:t==="show",onVisibleChanged:T,children:function(S,P){var O=S.className,w=S.style;return(0,M.jsx)("div",{ref:P,className:B()("".concat(m,"-treenode-motion"),O),style:w,children:v.map(function($){var j=Object.assign({},(He()($.data),$.data)),F=$.title,Z=$.key,I=$.isStart,V=$.isEnd;delete j.children;var Q=le(Z,s);return(0,R.createElement)(Ke,L()(L()(L()({},j),Q),{},{title:F,active:o,data:$.data,key:Z,isStart:I,isEnd:V}))})})}})):(0,M.jsx)(Ke,L()(L()({domRef:f,className:e,style:d},l),{},{active:o}))};Be.displayName="MotionTreeNode";var Ft=R.forwardRef(Be),Zt=Ft;function Ht(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],f=a.length,e=i.length;if(Math.abs(f-e)!==1)return{add:!1,key:null};function d(c,v){var t=new Map;c.forEach(function(r){t.set(r,!0)});var n=v.filter(function(r){return!t.has(r)});return n.length===1?n[0]:null}return f<e?{add:!0,key:d(a,i)}:{add:!1,key:d(i,a)}}function Ve(a,i,f){var e=a.findIndex(function(t){return t.key===f}),d=a[e+1],c=i.findIndex(function(t){return t.key===f});if(d){var v=i.findIndex(function(t){return t.key===d.key});return i.slice(c+1,v)}return i.slice(c+1)}var Ut=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],ze={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Gt=function(){},ee="RC_TREE_MOTION_".concat(Math.random()),De={key:ee},Ye={key:ee,level:0,index:0,pos:"0",node:De,nodes:[De]},Xe={parent:null,children:[],pos:Ye.pos,data:De,title:null,key:ee,isStart:[],isEnd:[]};function Je(a,i,f,e){return i===!1||!f?a:a.slice(0,Math.ceil(f/e)+1)}function Qe(a){var i=a.key,f=a.pos;return se(i,f)}function Wt(a){for(var i=String(a.data.key),f=a;f.parent;)f=f.parent,i="".concat(f.data.key," > ").concat(i);return i}var qe=R.forwardRef(function(a,i){var f=a.prefixCls,e=a.data,d=a.selectable,c=a.checkable,v=a.expandedKeys,t=a.selectedKeys,n=a.checkedKeys,r=a.loadedKeys,o=a.loadingKeys,s=a.halfCheckedKeys,l=a.keyEntities,p=a.disabled,g=a.dragging,y=a.dragOverNodeKey,u=a.dropPosition,K=a.motion,m=a.height,N=a.itemHeight,k=a.virtual,C=a.focusable,D=a.activeItem,T=a.focused,E=a.tabIndex,S=a.onKeyDown,P=a.onFocus,O=a.onBlur,w=a.onActiveChange,$=a.onListChangeStart,j=a.onListChangeEnd,F=he()(a,Ut),Z=R.useRef(null),I=R.useRef(null);R.useImperativeHandle(i,function(){return{scrollTo:function(U){Z.current.scrollTo(U)},getIndentWidth:function(){return I.current.offsetWidth}}});var V=R.useState(v),Q=_()(V,2),ce=Q[0],ue=Q[1],W=R.useState(e),te=_()(W,2),Y=te[0],re=te[1],Oe=R.useState(e),xe=_()(Oe,2),Le=xe[0],ae=xe[1],oe=R.useState([]),rt=_()(oe,2),an=rt[0],Me=rt[1],on=R.useState(null),at=_()(on,2),dn=at[0],we=at[1],ot=R.useRef(e);ot.current=e;function $e(){var G=ot.current;re(G),ae(G),Me([]),we(null),j()}(0,ge.ZP)(function(){ue(v);var G=Ht(ce,v);if(G.key!==null)if(G.add){var U=Y.findIndex(function(ve){var pe=ve.key;return pe===G.key}),de=Je(Ve(Y,e,G.key),k,m,N),ie=Y.slice();ie.splice(U+1,0,Xe),ae(ie),Me(de),we("show")}else{var Ie=e.findIndex(function(ve){var pe=ve.key;return pe===G.key}),fe=Je(Ve(e,Y,G.key),k,m,N),Ne=e.slice();Ne.splice(Ie+1,0,Xe),ae(Ne),Me(fe),we("hide")}else Y!==e&&(re(e),ae(e))},[v,e]),R.useEffect(function(){g||$e()},[g]);var sn=K?Le:e,dt={expandedKeys:v,selectedKeys:t,loadedKeys:r,loadingKeys:o,checkedKeys:n,halfCheckedKeys:s,dragOverNodeKey:y,dropPosition:u,keyEntities:l};return(0,M.jsxs)(M.Fragment,{children:[T&&D&&(0,M.jsx)("span",{style:ze,"aria-live":"assertive",children:Wt(D)}),(0,M.jsx)("div",{children:(0,M.jsx)("input",{style:ze,disabled:C===!1||p,tabIndex:C!==!1?E:null,onKeyDown:S,onFocus:P,onBlur:O,value:"",onChange:Gt,"aria-label":"for screen reader"})}),(0,M.jsx)("div",{className:"".concat(f,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0},children:(0,M.jsx)("div",{className:"".concat(f,"-indent"),children:(0,M.jsx)("div",{ref:I,className:"".concat(f,"-indent-unit")})})}),(0,M.jsx)(Ct.Z,L()(L()({},F),{},{data:sn,itemKey:Qe,height:m,fullHeight:!1,virtual:k,itemHeight:N,prefixCls:"".concat(f,"-list"),ref:Z,role:"tree",onVisibleChange:function(U){U.every(function(de){return Qe(de)!==ee})&&$e()},children:function(U){var de=U.pos,ie=Object.assign({},(He()(U.data),U.data)),Ie=U.title,fe=U.key,Ne=U.isStart,ve=U.isEnd,pe=se(fe,de);delete ie.key,delete ie.children;var ln=le(pe,dt);return(0,M.jsx)(Zt,L()(L()(L()({},ie),ln),{},{title:Ie,active:!!D&&fe===D.key,pos:de,data:U.data,isStart:Ne,isEnd:ve,motion:K,motionNodes:fe===ee?an:null,motionType:dn,onMotionStart:$,onMotionEnd:$e,treeNodeRequiredProps:dt,onMouseMove:function(){w(null)}}))}}))]})});qe.displayName="NodeList";var Bt=qe,Vt=null;function z(a,i){if(!a)return[];var f=a.slice(),e=f.indexOf(i);return e>=0&&f.splice(e,1),f}function J(a,i){var f=(a||[]).slice();return f.indexOf(i)===-1&&f.push(i),f}function be(a){return a.split("-")}function zt(a,i){var f=[],e=H(i,a);function d(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];c.forEach(function(v){var t=v.key,n=v.children;f.push(t),d(n)})}return d(e.children),f}function Yt(a){if(a.parent){var i=be(a.pos);return Number(i[i.length-1])===a.parent.children.length-1}return!1}function Xt(a){var i=be(a.pos);return Number(i[i.length-1])===0}function _e(a,i,f,e,d,c,v,t,n,r){var o,s=a.clientX,l=a.clientY,p=a.target.getBoundingClientRect(),g=p.top,y=p.height,u=(r==="rtl"?-1:1)*(((d==null?void 0:d.x)||0)-s),K=(u-12)/e,m=n.filter(function(Z){var I;return(I=t[Z])===null||I===void 0||(I=I.children)===null||I===void 0?void 0:I.length}),N=H(t,f.props.eventKey);if(l<g+y/2){var k=v.findIndex(function(Z){return Z.key===N.key}),C=k<=0?0:k-1,D=v[C].key;N=H(t,D)}var T=N.key,E=N,S=N.key,P=0,O=0;if(!m.includes(T))for(var w=0;w<K&&Yt(N);w+=1)N=N.parent,O+=1;var $=i.props.data,j=N.node,F=!0;return Xt(N)&&N.level===0&&l<g+y/2&&c({dragNode:$,dropNode:j,dropPosition:-1})&&N.key===f.props.eventKey?P=-1:(E.children||[]).length&&m.includes(S)?c({dragNode:$,dropNode:j,dropPosition:0})?P=0:F=!1:O===0?K>-1.5?c({dragNode:$,dropNode:j,dropPosition:1})?P=1:F=!1:c({dragNode:$,dropNode:j,dropPosition:0})?P=0:c({dragNode:$,dropNode:j,dropPosition:1})?P=1:F=!1:c({dragNode:$,dropNode:j,dropPosition:1})?P=1:F=!1,{dropPosition:P,dropLevelOffset:O,dropTargetKey:N.key,dropTargetPos:N.pos,dragOverNodeKey:S,dropContainerKey:P===0?null:((o=N.parent)===null||o===void 0?void 0:o.key)||null,dropAllowed:F}}function et(a,i){if(a){var f=i.multiple;return f?a.slice():a.length?[a[0]]:a}}var Jt=function(i){return i};function Qt(a,i){if(!a)return[];var f=i||{},e=f.processProps,d=e===void 0?Jt:e,c=Array.isArray(a)?a:[a];return c.map(function(v){var t=v.children,n=_objectWithoutProperties(v,Vt),r=Qt(t,i);return _jsx(TreeNode,_objectSpread(_objectSpread({},d(n)),{},{children:r}),n.key)})}function Se(a){if(!a)return null;var i;if(Array.isArray(a))i={checkedKeys:a,halfCheckedKeys:void 0};else if(ke()(a)==="object")i={checkedKeys:a.checked||void 0,halfCheckedKeys:a.halfChecked||void 0};else return(0,X.ZP)(!1,"`checkedKeys` is not an array or an object"),null;return i}function tt(a,i){var f=new Set;function e(d){if(!f.has(d)){var c=H(i,d);if(c){f.add(d);var v=c.parent,t=c.node;t.disabled||v&&e(v.key)}}}return(a||[]).forEach(function(d){e(d)}),q()(f)}function nt(a,i){var f=new Set;return a.forEach(function(e){i.has(e)||f.add(e)}),f}function qt(a){var i=a||{},f=i.disabled,e=i.disableCheckbox,d=i.checkable;return!!(f||e)||d===!1}function _t(a,i,f,e){for(var d=new Set(a),c=new Set,v=0;v<=f;v+=1){var t=i.get(v)||new Set;t.forEach(function(s){var l=s.key,p=s.node,g=s.children,y=g===void 0?[]:g;d.has(l)&&!e(p)&&y.filter(function(u){return!e(u.node)}).forEach(function(u){d.add(u.key)})})}for(var n=new Set,r=f;r>=0;r-=1){var o=i.get(r)||new Set;o.forEach(function(s){var l=s.parent,p=s.node;if(!(e(p)||!s.parent||n.has(s.parent.key))){if(e(s.parent.node)){n.add(l.key);return}var g=!0,y=!1;(l.children||[]).filter(function(u){return!e(u.node)}).forEach(function(u){var K=u.key,m=d.has(K);g&&!m&&(g=!1),!y&&(m||c.has(K))&&(y=!0)}),g&&d.add(l.key),y&&c.add(l.key),n.add(l.key)}})}return{checkedKeys:Array.from(d),halfCheckedKeys:Array.from(nt(c,d))}}function en(a,i,f,e,d){for(var c=new Set(a),v=new Set(i),t=0;t<=e;t+=1){var n=f.get(t)||new Set;n.forEach(function(l){var p=l.key,g=l.node,y=l.children,u=y===void 0?[]:y;!c.has(p)&&!v.has(p)&&!d(g)&&u.filter(function(K){return!d(K.node)}).forEach(function(K){c.delete(K.key)})})}v=new Set;for(var r=new Set,o=e;o>=0;o-=1){var s=f.get(o)||new Set;s.forEach(function(l){var p=l.parent,g=l.node;if(!(d(g)||!l.parent||r.has(l.parent.key))){if(d(l.parent.node)){r.add(p.key);return}var y=!0,u=!1;(p.children||[]).filter(function(K){return!d(K.node)}).forEach(function(K){var m=K.key,N=c.has(m);y&&!N&&(y=!1),!u&&(N||v.has(m))&&(u=!0)}),y||c.delete(p.key),u&&v.add(p.key),r.add(p.key)}})}return{checkedKeys:Array.from(c),halfCheckedKeys:Array.from(nt(v,c))}}function Pe(a,i,f,e){var d=[],c;e?c=e:c=qt;var v=new Set(a.filter(function(o){var s=!!H(f,o);return s||d.push(o),s})),t=new Map,n=0;Object.keys(f).forEach(function(o){var s=f[o],l=s.level,p=t.get(l);p||(p=new Set,t.set(l,p)),p.add(s),n=Math.max(n,l)}),(0,X.ZP)(!d.length,"Tree missing follow keys: ".concat(d.slice(0,100).map(function(o){return"'".concat(o,"'")}).join(", ")));var r;return i===!0?r=_t(v,t,n,c):r=en(v,i.halfCheckedKeys,t,n,c),r}var tn=10,Te=function(a){je()(f,a);var i=Fe()(f);function f(){var e;Re()(this,f);for(var d=arguments.length,c=new Array(d),v=0;v<d;v++)c[v]=arguments[v];return e=i.call.apply(i,[this].concat(c)),h()(x()(e),"destroyed",!1),h()(x()(e),"delayedDragEnterLogic",void 0),h()(x()(e),"loadingRetryTimes",{}),h()(x()(e),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:ye()}),h()(x()(e),"dragStartMousePosition",null),h()(x()(e),"dragNode",void 0),h()(x()(e),"currentMouseOverDroppableNodeKey",null),h()(x()(e),"listRef",R.createRef()),h()(x()(e),"onNodeDragStart",function(t,n){var r=e.state,o=r.expandedKeys,s=r.keyEntities,l=e.props.onDragStart,p=n.props.eventKey;e.dragNode=n,e.dragStartMousePosition={x:t.clientX,y:t.clientY};var g=z(o,p);e.setState({draggingNodeKey:p,dragChildrenKeys:zt(p,s),indent:e.listRef.current.getIndentWidth()}),e.setExpandedKeys(g),window.addEventListener("dragend",e.onWindowDragEnd),l==null||l({event:t,node:A(n.props)})}),h()(x()(e),"onNodeDragEnter",function(t,n){var r=e.state,o=r.expandedKeys,s=r.keyEntities,l=r.dragChildrenKeys,p=r.flattenNodes,g=r.indent,y=e.props,u=y.onDragEnter,K=y.onExpand,m=y.allowDrop,N=y.direction,k=n.props,C=k.pos,D=k.eventKey,T=x()(e),E=T.dragNode;if(e.currentMouseOverDroppableNodeKey!==D&&(e.currentMouseOverDroppableNodeKey=D),!E){e.resetDragState();return}var S=_e(t,E,n,g,e.dragStartMousePosition,m,p,s,o,N),P=S.dropPosition,O=S.dropLevelOffset,w=S.dropTargetKey,$=S.dropContainerKey,j=S.dropTargetPos,F=S.dropAllowed,Z=S.dragOverNodeKey;if(l.indexOf(w)!==-1||!F){e.resetDragState();return}if(e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach(function(I){clearTimeout(e.delayedDragEnterLogic[I])}),E.props.eventKey!==n.props.eventKey&&(t.persist(),e.delayedDragEnterLogic[C]=window.setTimeout(function(){if(e.state.draggingNodeKey!==null){var I=q()(o),V=H(s,n.props.eventKey);V&&(V.children||[]).length&&(I=J(o,n.props.eventKey)),e.props.hasOwnProperty("expandedKeys")||e.setExpandedKeys(I),K==null||K(I,{node:A(n.props),expanded:!0,nativeEvent:t.nativeEvent})}},800)),E.props.eventKey===w&&O===0){e.resetDragState();return}e.setState({dragOverNodeKey:Z,dropPosition:P,dropLevelOffset:O,dropTargetKey:w,dropContainerKey:$,dropTargetPos:j,dropAllowed:F}),u==null||u({event:t,node:A(n.props),expandedKeys:o})}),h()(x()(e),"onNodeDragOver",function(t,n){var r=e.state,o=r.dragChildrenKeys,s=r.flattenNodes,l=r.keyEntities,p=r.expandedKeys,g=r.indent,y=e.props,u=y.onDragOver,K=y.allowDrop,m=y.direction,N=x()(e),k=N.dragNode;if(k){var C=_e(t,k,n,g,e.dragStartMousePosition,K,s,l,p,m),D=C.dropPosition,T=C.dropLevelOffset,E=C.dropTargetKey,S=C.dropContainerKey,P=C.dropAllowed,O=C.dropTargetPos,w=C.dragOverNodeKey;o.indexOf(E)!==-1||!P||(k.props.eventKey===E&&T===0?e.state.dropPosition===null&&e.state.dropLevelOffset===null&&e.state.dropTargetKey===null&&e.state.dropContainerKey===null&&e.state.dropTargetPos===null&&e.state.dropAllowed===!1&&e.state.dragOverNodeKey===null||e.resetDragState():D===e.state.dropPosition&&T===e.state.dropLevelOffset&&E===e.state.dropTargetKey&&S===e.state.dropContainerKey&&O===e.state.dropTargetPos&&P===e.state.dropAllowed&&w===e.state.dragOverNodeKey||e.setState({dropPosition:D,dropLevelOffset:T,dropTargetKey:E,dropContainerKey:S,dropTargetPos:O,dropAllowed:P,dragOverNodeKey:w}),u==null||u({event:t,node:A(n.props)}))}}),h()(x()(e),"onNodeDragLeave",function(t,n){e.currentMouseOverDroppableNodeKey===n.props.eventKey&&!t.currentTarget.contains(t.relatedTarget)&&(e.resetDragState(),e.currentMouseOverDroppableNodeKey=null);var r=e.props.onDragLeave;r==null||r({event:t,node:A(n.props)})}),h()(x()(e),"onWindowDragEnd",function(t){e.onNodeDragEnd(t,null,!0),window.removeEventListener("dragend",e.onWindowDragEnd)}),h()(x()(e),"onNodeDragEnd",function(t,n){var r=e.props.onDragEnd;e.setState({dragOverNodeKey:null}),e.cleanDragState(),r==null||r({event:t,node:A(n.props)}),e.dragNode=null,window.removeEventListener("dragend",e.onWindowDragEnd)}),h()(x()(e),"onNodeDrop",function(t,n){var r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=e.state,l=s.dragChildrenKeys,p=s.dropPosition,g=s.dropTargetKey,y=s.dropTargetPos,u=s.dropAllowed;if(u){var K=e.props.onDrop;if(e.setState({dragOverNodeKey:null}),e.cleanDragState(),g!==null){var m=L()(L()({},le(g,e.getTreeNodeRequiredProps())),{},{active:((r=e.getActiveItem())===null||r===void 0?void 0:r.key)===g,data:H(e.state.keyEntities,g).node}),N=l.indexOf(g)!==-1;(0,X.ZP)(!N,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var k=be(y),C={event:t,node:A(m),dragNode:e.dragNode?A(e.dragNode.props):null,dragNodesKeys:[e.dragNode.props.eventKey].concat(l),dropToGap:p!==0,dropPosition:p+Number(k[k.length-1])};o||K==null||K(C),e.dragNode=null}}}),h()(x()(e),"cleanDragState",function(){var t=e.state.draggingNodeKey;t!==null&&e.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),e.dragStartMousePosition=null,e.currentMouseOverDroppableNodeKey=null}),h()(x()(e),"triggerExpandActionExpand",function(t,n){var r=e.state,o=r.expandedKeys,s=r.flattenNodes,l=n.expanded,p=n.key,g=n.isLeaf;if(!(g||t.shiftKey||t.metaKey||t.ctrlKey)){var y=s.filter(function(K){return K.key===p})[0],u=A(L()(L()({},le(p,e.getTreeNodeRequiredProps())),{},{data:y.data}));e.setExpandedKeys(l?z(o,p):J(o,p)),e.onNodeExpand(t,u)}}),h()(x()(e),"onNodeClick",function(t,n){var r=e.props,o=r.onClick,s=r.expandAction;s==="click"&&e.triggerExpandActionExpand(t,n),o==null||o(t,n)}),h()(x()(e),"onNodeDoubleClick",function(t,n){var r=e.props,o=r.onDoubleClick,s=r.expandAction;s==="doubleClick"&&e.triggerExpandActionExpand(t,n),o==null||o(t,n)}),h()(x()(e),"onNodeSelect",function(t,n){var r=e.state.selectedKeys,o=e.state,s=o.keyEntities,l=o.fieldNames,p=e.props,g=p.onSelect,y=p.multiple,u=n.selected,K=n[l.key],m=!u;m?y?r=J(r,K):r=[K]:r=z(r,K);var N=r.map(function(k){var C=H(s,k);return C?C.node:null}).filter(function(k){return k});e.setUncontrolledState({selectedKeys:r}),g==null||g(r,{event:"select",selected:m,node:n,selectedNodes:N,nativeEvent:t.nativeEvent})}),h()(x()(e),"onNodeCheck",function(t,n,r){var o=e.state,s=o.keyEntities,l=o.checkedKeys,p=o.halfCheckedKeys,g=e.props,y=g.checkStrictly,u=g.onCheck,K=n.key,m,N={event:"check",node:n,checked:r,nativeEvent:t.nativeEvent};if(y){var k=r?J(l,K):z(l,K),C=z(p,K);m={checked:k,halfChecked:C},N.checkedNodes=k.map(function(O){return H(s,O)}).filter(function(O){return O}).map(function(O){return O.node}),e.setUncontrolledState({checkedKeys:k})}else{var D=Pe([].concat(q()(l),[K]),!0,s),T=D.checkedKeys,E=D.halfCheckedKeys;if(!r){var S=new Set(T);S.delete(K);var P=Pe(Array.from(S),{checked:!1,halfCheckedKeys:E},s);T=P.checkedKeys,E=P.halfCheckedKeys}m=T,N.checkedNodes=[],N.checkedNodesPositions=[],N.halfCheckedKeys=E,T.forEach(function(O){var w=H(s,O);if(w){var $=w.node,j=w.pos;N.checkedNodes.push($),N.checkedNodesPositions.push({node:$,pos:j})}}),e.setUncontrolledState({checkedKeys:T},!1,{halfCheckedKeys:E})}u==null||u(m,N)}),h()(x()(e),"onNodeLoad",function(t){var n,r=t.key,o=e.state.keyEntities,s=H(o,r);if(!(s!=null&&(n=s.children)!==null&&n!==void 0&&n.length)){var l=new Promise(function(p,g){e.setState(function(y){var u=y.loadedKeys,K=u===void 0?[]:u,m=y.loadingKeys,N=m===void 0?[]:m,k=e.props,C=k.loadData,D=k.onLoad;if(!C||K.indexOf(r)!==-1||N.indexOf(r)!==-1)return null;var T=C(t);return T.then(function(){var E=e.state.loadedKeys,S=J(E,r);D==null||D(S,{event:"load",node:t}),e.setUncontrolledState({loadedKeys:S}),e.setState(function(P){return{loadingKeys:z(P.loadingKeys,r)}}),p()}).catch(function(E){if(e.setState(function(P){return{loadingKeys:z(P.loadingKeys,r)}}),e.loadingRetryTimes[r]=(e.loadingRetryTimes[r]||0)+1,e.loadingRetryTimes[r]>=tn){var S=e.state.loadedKeys;(0,X.ZP)(!1,"Retry for `loadData` many times but still failed. No more retry."),e.setUncontrolledState({loadedKeys:J(S,r)}),p()}g(E)}),{loadingKeys:J(N,r)}})});return l.catch(function(){}),l}}),h()(x()(e),"onNodeMouseEnter",function(t,n){var r=e.props.onMouseEnter;r==null||r({event:t,node:n})}),h()(x()(e),"onNodeMouseLeave",function(t,n){var r=e.props.onMouseLeave;r==null||r({event:t,node:n})}),h()(x()(e),"onNodeContextMenu",function(t,n){var r=e.props.onRightClick;r&&(t.preventDefault(),r({event:t,node:n}))}),h()(x()(e),"onFocus",function(){var t=e.props.onFocus;e.setState({focused:!0});for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];t==null||t.apply(void 0,r)}),h()(x()(e),"onBlur",function(){var t=e.props.onBlur;e.setState({focused:!1}),e.onActiveChange(null);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];t==null||t.apply(void 0,r)}),h()(x()(e),"getTreeNodeRequiredProps",function(){var t=e.state,n=t.expandedKeys,r=t.selectedKeys,o=t.loadedKeys,s=t.loadingKeys,l=t.checkedKeys,p=t.halfCheckedKeys,g=t.dragOverNodeKey,y=t.dropPosition,u=t.keyEntities;return{expandedKeys:n||[],selectedKeys:r||[],loadedKeys:o||[],loadingKeys:s||[],checkedKeys:l||[],halfCheckedKeys:p||[],dragOverNodeKey:g,dropPosition:y,keyEntities:u}}),h()(x()(e),"setExpandedKeys",function(t){var n=e.state,r=n.treeData,o=n.fieldNames,s=Ce(r,t,o);e.setUncontrolledState({expandedKeys:t,flattenNodes:s},!0)}),h()(x()(e),"onNodeExpand",function(t,n){var r=e.state.expandedKeys,o=e.state,s=o.listChanging,l=o.fieldNames,p=e.props,g=p.onExpand,y=p.loadData,u=n.expanded,K=n[l.key];if(!s){var m=r.indexOf(K),N=!u;if((0,X.ZP)(u&&m!==-1||!u&&m===-1,"Expand state not sync with index check"),N?r=J(r,K):r=z(r,K),e.setExpandedKeys(r),g==null||g(r,{node:n,expanded:N,nativeEvent:t.nativeEvent}),N&&y){var k=e.onNodeLoad(n);k&&k.then(function(){var C=Ce(e.state.treeData,r,l);e.setUncontrolledState({flattenNodes:C})}).catch(function(){var C=e.state.expandedKeys,D=z(C,K);e.setExpandedKeys(D)})}}}),h()(x()(e),"onListChangeStart",function(){e.setUncontrolledState({listChanging:!0})}),h()(x()(e),"onListChangeEnd",function(){setTimeout(function(){e.setUncontrolledState({listChanging:!1})})}),h()(x()(e),"onActiveChange",function(t){var n=e.state.activeKey,r=e.props,o=r.onActiveChange,s=r.itemScrollOffset,l=s===void 0?0:s;n!==t&&(e.setState({activeKey:t}),t!==null&&e.scrollTo({key:t,offset:l}),o==null||o(t))}),h()(x()(e),"getActiveItem",function(){var t=e.state,n=t.activeKey,r=t.flattenNodes;return n===null?null:r.find(function(o){var s=o.key;return s===n})||null}),h()(x()(e),"offsetActiveKey",function(t){var n=e.state,r=n.flattenNodes,o=n.activeKey,s=r.findIndex(function(g){var y=g.key;return y===o});s===-1&&t<0&&(s=r.length),s=(s+t+r.length)%r.length;var l=r[s];if(l){var p=l.key;e.onActiveChange(p)}else e.onActiveChange(null)}),h()(x()(e),"onKeyDown",function(t){var n=e.state,r=n.activeKey,o=n.expandedKeys,s=n.checkedKeys,l=n.fieldNames,p=e.props,g=p.onKeyDown,y=p.checkable,u=p.selectable;switch(t.which){case ne.Z.UP:{e.offsetActiveKey(-1),t.preventDefault();break}case ne.Z.DOWN:{e.offsetActiveKey(1),t.preventDefault();break}}var K=e.getActiveItem();if(K&&K.data){var m=e.getTreeNodeRequiredProps(),N=K.data.isLeaf===!1||!!(K.data[l.children]||[]).length,k=A(L()(L()({},le(r,m)),{},{data:K.data,active:!0}));switch(t.which){case ne.Z.LEFT:{N&&o.includes(r)?e.onNodeExpand({},k):K.parent&&e.onActiveChange(K.parent.key),t.preventDefault();break}case ne.Z.RIGHT:{N&&!o.includes(r)?e.onNodeExpand({},k):K.children&&K.children.length&&e.onActiveChange(K.children[0].key),t.preventDefault();break}case ne.Z.ENTER:case ne.Z.SPACE:{y&&!k.disabled&&k.checkable!==!1&&!k.disableCheckbox?e.onNodeCheck({},k,!s.includes(r)):!y&&u&&!k.disabled&&k.selectable!==!1&&e.onNodeSelect({},k);break}}}g==null||g(t)}),h()(x()(e),"setUncontrolledState",function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!e.destroyed){var o=!1,s=!0,l={};Object.keys(t).forEach(function(p){if(e.props.hasOwnProperty(p)){s=!1;return}o=!0,l[p]=t[p]}),o&&(!n||s)&&e.setState(L()(L()({},l),r))}}),h()(x()(e),"scrollTo",function(t){e.listRef.current.scrollTo(t)}),e}return Ae()(f,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var d=this.props,c=d.activeKey,v=d.itemScrollOffset,t=v===void 0?0:v;c!==void 0&&c!==this.state.activeKey&&(this.setState({activeKey:c}),c!==null&&this.scrollTo({key:c,offset:t}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var d=this.state,c=d.focused,v=d.flattenNodes,t=d.keyEntities,n=d.draggingNodeKey,r=d.activeKey,o=d.dropLevelOffset,s=d.dropContainerKey,l=d.dropTargetKey,p=d.dropPosition,g=d.dragOverNodeKey,y=d.indent,u=this.props,K=u.prefixCls,m=u.className,N=u.style,k=u.showLine,C=u.focusable,D=u.tabIndex,T=D===void 0?0:D,E=u.selectable,S=u.showIcon,P=u.icon,O=u.switcherIcon,w=u.draggable,$=u.checkable,j=u.checkStrictly,F=u.disabled,Z=u.motion,I=u.loadData,V=u.filterTreeNode,Q=u.height,ce=u.itemHeight,ue=u.virtual,W=u.titleRender,te=u.dropIndicatorRender,Y=u.onContextMenu,re=u.onScroll,Oe=u.direction,xe=u.rootClassName,Le=u.rootStyle,ae=(0,Ze.Z)(this.props,{aria:!0,data:!0}),oe;return w&&(ke()(w)==="object"?oe=w:typeof w=="function"?oe={nodeDraggable:w}:oe={}),(0,M.jsx)(me.Provider,{value:{prefixCls:K,selectable:E,showIcon:S,icon:P,switcherIcon:O,draggable:oe,draggingNodeKey:n,checkable:$,checkStrictly:j,disabled:F,keyEntities:t,dropLevelOffset:o,dropContainerKey:s,dropTargetKey:l,dropPosition:p,dragOverNodeKey:g,indent:y,direction:Oe,dropIndicatorRender:te,loadData:I,filterTreeNode:V,titleRender:W,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop},children:(0,M.jsx)("div",{className:B()(K,m,xe,h()(h()(h()({},"".concat(K,"-show-line"),k),"".concat(K,"-focused"),c),"".concat(K,"-active-focused"),r!==null)),style:Le,children:(0,M.jsx)(Bt,L()(L()({ref:this.listRef,prefixCls:K,style:N,data:v,disabled:F,selectable:E,checkable:!!$,motion:Z,dragging:n!==null,height:Q,itemHeight:ce,virtual:ue,focusable:C,focused:c,tabIndex:T,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:Y,onScroll:re},this.getTreeNodeRequiredProps()),ae))})})}}],[{key:"getDerivedStateFromProps",value:function(d,c){var v=c.prevProps,t={prevProps:d};function n(T){return!v&&d.hasOwnProperty(T)||v&&v[T]!==d[T]}var r,o=c.fieldNames;if(n("fieldNames")&&(o=ye(d.fieldNames),t.fieldNames=o),n("treeData")?r=d.treeData:n("children")&&((0,X.ZP)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),r=Lt(d.children)),r){t.treeData=r;var s=wt(r,{fieldNames:o});t.keyEntities=L()(h()({},ee,Ye),s.keyEntities)}var l=t.keyEntities||c.keyEntities;if(n("expandedKeys")||v&&n("autoExpandParent"))t.expandedKeys=d.autoExpandParent||!v&&d.defaultExpandParent?tt(d.expandedKeys,l):d.expandedKeys;else if(!v&&d.defaultExpandAll){var p=L()({},l);delete p[ee];var g=[];Object.keys(p).forEach(function(T){var E=p[T];E.children&&E.children.length&&g.push(E.key)}),t.expandedKeys=g}else!v&&d.defaultExpandedKeys&&(t.expandedKeys=d.autoExpandParent||d.defaultExpandParent?tt(d.defaultExpandedKeys,l):d.defaultExpandedKeys);if(t.expandedKeys||delete t.expandedKeys,r||t.expandedKeys){var y=Ce(r||c.treeData,t.expandedKeys||c.expandedKeys,o);t.flattenNodes=y}if(d.selectable&&(n("selectedKeys")?t.selectedKeys=et(d.selectedKeys,d):!v&&d.defaultSelectedKeys&&(t.selectedKeys=et(d.defaultSelectedKeys,d))),d.checkable){var u;if(n("checkedKeys")?u=Se(d.checkedKeys)||{}:!v&&d.defaultCheckedKeys?u=Se(d.defaultCheckedKeys)||{}:r&&(u=Se(d.checkedKeys)||{checkedKeys:c.checkedKeys,halfCheckedKeys:c.halfCheckedKeys}),u){var K=u,m=K.checkedKeys,N=m===void 0?[]:m,k=K.halfCheckedKeys,C=k===void 0?[]:k;if(!d.checkStrictly){var D=Pe(N,!0,l);N=D.checkedKeys,C=D.halfCheckedKeys}t.checkedKeys=N,t.halfCheckedKeys=C}}return n("loadedKeys")&&(t.loadedKeys=d.loadedKeys),t}}]),f}(R.Component);h()(Te,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:xt,allowDrop:function(){return!0},expandAction:!1}),h()(Te,"TreeNode",Ke);var nn=Te,rn=nn}}]);
