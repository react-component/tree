{"version":3,"sources":["webpack:///./examples/animation.js","webpack:///./node_modules/_css-animation@1.4.1@css-animation/es/index.js","webpack:///./node_modules/_css-animation@1.4.1@css-animation/es/Event.js"],"names":["STYLE","animate","node","show","done","height","offsetHeight","cssAnimation","start","style","active","end","animation","enter","leave","demo","__html","ReactDOM","render","document","getElementById"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMA,kIAAN;;AAWA,SAASC,OAAT,CAAiBC,IAAjB,EAAuBC,IAAvB,EAA6BC,IAA7B,EAAmC;AACjC,MAAIC,SAASH,KAAKI,YAAlB;AACA,SAAO,sEAAAC,CAAaL,IAAb,EAAmB,UAAnB,EAA+B;AACpCM,SADoC,mBAC5B;AACN,UAAI,CAACL,IAAL,EAAW;AACTD,aAAKO,KAAL,CAAWJ,MAAX,GAAuBH,KAAKI,YAA5B;AACD,OAFD,MAEO;AACLD,iBAASH,KAAKI,YAAd;AACAJ,aAAKO,KAAL,CAAWJ,MAAX,GAAoB,CAApB;AACD;AACF,KARmC;AASpCK,UAToC,oBAS3B;AACPR,WAAKO,KAAL,CAAWJ,MAAX,IAAuBF,OAAOE,MAAP,GAAgB,CAAvC;AACD,KAXmC;AAYpCM,OAZoC,iBAY9B;AACJT,WAAKO,KAAL,CAAWJ,MAAX,GAAoB,EAApB;AACAD;AACD;AAfmC,GAA/B,CAAP;AAiBD;;AAED,IAAMQ,YAAY;AAChBC,OADgB,iBACVX,IADU,EACJE,IADI,EACE;AAChB,WAAOH,QAAQC,IAAR,EAAc,IAAd,EAAoBE,IAApB,CAAP;AACD,GAHe;AAIhBU,OAJgB,iBAIVZ,IAJU,EAIJE,IAJI,EAIE;AAChB,WAAOH,QAAQC,IAAR,EAAc,KAAd,EAAqBE,IAArB,CAAP;AACD;AANe,CAAlB;;AASA,IAAMW,OACJ;AAAA;AAAA;AACE;AAAA;AAAA;AAAA;AAAA,GADF;AAEE,yEAAO,yBAAyB,EAAEC,QAAQhB,KAAV,EAAhC,GAFF;AAGE;AAAC,mDAAD;AAAA;AACE,wBAAkB,KADpB;AAEE,2BAAqB,CAAC,IAAD,CAFvB;AAGE,qBAAeY;AAHjB;AAKE;AAAC,uDAAD;AAAA,QAAU,OAAM,UAAhB,EAA2B,KAAI,IAA/B;AACE,kEAAC,iDAAD,IAAU,KAAI,KAAd,EAAoB,OAAM,MAA1B,GADF;AAEE;AAAC,yDAAD;AAAA,UAAU,OAAM,YAAhB,EAA6B,KAAI,KAAjC;AACE;AAAC,2DAAD;AAAA,YAAU,OAAM,YAAhB,EAA6B,KAAI,KAAjC;AACE,sEAAC,iDAAD,IAAU,OAAM,MAAhB,GADF;AAEE,sEAAC,iDAAD,IAAU,OAAM,MAAhB;AAFF,SADF;AAKE,oEAAC,iDAAD,IAAU,KAAI,KAAd,EAAoB,OAAM,MAA1B;AALF;AAFF;AALF;AAHF,CADF;;AAuBA,iDAAAK,CAASC,MAAT,CAAgBH,IAAhB,EAAsBI,SAASC,cAAT,CAAwB,iBAAxB,CAAtB,E;;;;;;;;;;;;;;ACvEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEQ;;AAER,uE;;;;;;;;AC9KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;;AAGH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,2E","file":"examples/animation.js","sourcesContent":["/* eslint no-console:0, react/no-danger: 0 */\nimport 'rc-tree/assets/index.less';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Tree, { TreeNode } from 'rc-tree';\nimport cssAnimation from 'css-animation';\n\nconst STYLE = `\n.collapse {\n  overflow: hidden;\n  display: block;\n}\n\n.collapse-active {\n  transition: height 0.3s ease-out;\n}\n`;\n\nfunction animate(node, show, done) {\n  let height = node.offsetHeight;\n  return cssAnimation(node, 'collapse', {\n    start() {\n      if (!show) {\n        node.style.height = `${node.offsetHeight}px`;\n      } else {\n        height = node.offsetHeight;\n        node.style.height = 0;\n      }\n    },\n    active() {\n      node.style.height = `${show ? height : 0}px`;\n    },\n    end() {\n      node.style.height = '';\n      done();\n    },\n  });\n}\n\nconst animation = {\n  enter(node, done) {\n    return animate(node, true, done);\n  },\n  leave(node, done) {\n    return animate(node, false, done);\n  },\n};\n\nconst demo = (\n  <div>\n    <h2>expanded</h2>\n    <style dangerouslySetInnerHTML={{ __html: STYLE }}/>\n    <Tree\n      defaultExpandAll={false}\n      defaultExpandedKeys={['p1']}\n      openAnimation={animation}\n    >\n      <TreeNode title=\"parent 1\" key=\"p1\">\n        <TreeNode key=\"p10\" title=\"leaf\"/>\n        <TreeNode title=\"parent 1-1\" key=\"p11\">\n          <TreeNode title=\"parent 2-1\" key=\"p21\">\n            <TreeNode title=\"leaf\"/>\n            <TreeNode title=\"leaf\"/>\n          </TreeNode>\n          <TreeNode key=\"p22\" title=\"leaf\"/>\n        </TreeNode>\n      </TreeNode>\n    </Tree>\n  </div>\n);\n\nReactDOM.render(demo, document.getElementById('__react-content'));\n\n\n\n// WEBPACK FOOTER //\n// ./examples/animation.js","import _typeof from 'babel-runtime/helpers/typeof';\nimport Event from './Event';\nimport classes from 'component-classes';\n\nvar isCssAnimationSupported = Event.endEvents.length !== 0;\nvar capitalPrefixes = ['Webkit', 'Moz', 'O',\n// ms is special .... !\n'ms'];\nvar prefixes = ['-webkit-', '-moz-', '-o-', 'ms-', ''];\n\nfunction getStyleProperty(node, name) {\n  // old ff need null, https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle\n  var style = window.getComputedStyle(node, null);\n  var ret = '';\n  for (var i = 0; i < prefixes.length; i++) {\n    ret = style.getPropertyValue(prefixes[i] + name);\n    if (ret) {\n      break;\n    }\n  }\n  return ret;\n}\n\nfunction fixBrowserByTimeout(node) {\n  if (isCssAnimationSupported) {\n    var transitionDelay = parseFloat(getStyleProperty(node, 'transition-delay')) || 0;\n    var transitionDuration = parseFloat(getStyleProperty(node, 'transition-duration')) || 0;\n    var animationDelay = parseFloat(getStyleProperty(node, 'animation-delay')) || 0;\n    var animationDuration = parseFloat(getStyleProperty(node, 'animation-duration')) || 0;\n    var time = Math.max(transitionDuration + transitionDelay, animationDuration + animationDelay);\n    // sometimes, browser bug\n    node.rcEndAnimTimeout = setTimeout(function () {\n      node.rcEndAnimTimeout = null;\n      if (node.rcEndListener) {\n        node.rcEndListener();\n      }\n    }, time * 1000 + 200);\n  }\n}\n\nfunction clearBrowserBugTimeout(node) {\n  if (node.rcEndAnimTimeout) {\n    clearTimeout(node.rcEndAnimTimeout);\n    node.rcEndAnimTimeout = null;\n  }\n}\n\nvar cssAnimation = function cssAnimation(node, transitionName, endCallback) {\n  var nameIsObj = (typeof transitionName === 'undefined' ? 'undefined' : _typeof(transitionName)) === 'object';\n  var className = nameIsObj ? transitionName.name : transitionName;\n  var activeClassName = nameIsObj ? transitionName.active : transitionName + '-active';\n  var end = endCallback;\n  var start = void 0;\n  var active = void 0;\n  var nodeClasses = classes(node);\n\n  if (endCallback && Object.prototype.toString.call(endCallback) === '[object Object]') {\n    end = endCallback.end;\n    start = endCallback.start;\n    active = endCallback.active;\n  }\n\n  if (node.rcEndListener) {\n    node.rcEndListener();\n  }\n\n  node.rcEndListener = function (e) {\n    if (e && e.target !== node) {\n      return;\n    }\n\n    if (node.rcAnimTimeout) {\n      clearTimeout(node.rcAnimTimeout);\n      node.rcAnimTimeout = null;\n    }\n\n    clearBrowserBugTimeout(node);\n\n    nodeClasses.remove(className);\n    nodeClasses.remove(activeClassName);\n\n    Event.removeEndEventListener(node, node.rcEndListener);\n    node.rcEndListener = null;\n\n    // Usually this optional end is used for informing an owner of\n    // a leave animation and telling it to remove the child.\n    if (end) {\n      end();\n    }\n  };\n\n  Event.addEndEventListener(node, node.rcEndListener);\n\n  if (start) {\n    start();\n  }\n  nodeClasses.add(className);\n\n  node.rcAnimTimeout = setTimeout(function () {\n    node.rcAnimTimeout = null;\n    nodeClasses.add(activeClassName);\n    if (active) {\n      setTimeout(active, 0);\n    }\n    fixBrowserByTimeout(node);\n    // 30ms for firefox\n  }, 30);\n\n  return {\n    stop: function stop() {\n      if (node.rcEndListener) {\n        node.rcEndListener();\n      }\n    }\n  };\n};\n\ncssAnimation.style = function (node, style, callback) {\n  if (node.rcEndListener) {\n    node.rcEndListener();\n  }\n\n  node.rcEndListener = function (e) {\n    if (e && e.target !== node) {\n      return;\n    }\n\n    if (node.rcAnimTimeout) {\n      clearTimeout(node.rcAnimTimeout);\n      node.rcAnimTimeout = null;\n    }\n\n    clearBrowserBugTimeout(node);\n\n    Event.removeEndEventListener(node, node.rcEndListener);\n    node.rcEndListener = null;\n\n    // Usually this optional callback is used for informing an owner of\n    // a leave animation and telling it to remove the child.\n    if (callback) {\n      callback();\n    }\n  };\n\n  Event.addEndEventListener(node, node.rcEndListener);\n\n  node.rcAnimTimeout = setTimeout(function () {\n    for (var s in style) {\n      if (style.hasOwnProperty(s)) {\n        node.style[s] = style[s];\n      }\n    }\n    node.rcAnimTimeout = null;\n    fixBrowserByTimeout(node);\n  }, 0);\n};\n\ncssAnimation.setTransition = function (node, p, value) {\n  var property = p;\n  var v = value;\n  if (value === undefined) {\n    v = property;\n    property = '';\n  }\n  property = property || '';\n  capitalPrefixes.forEach(function (prefix) {\n    node.style[prefix + 'Transition' + property] = v;\n  });\n};\n\ncssAnimation.isCssAnimationSupported = isCssAnimationSupported;\n\nexport { isCssAnimationSupported };\n\nexport default cssAnimation;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-animation@1.4.1@css-animation/es/index.js\n// module id = 23\n// module chunks = 0 1 2 5","var EVENT_NAME_MAP = {\n  transitionend: {\n    transition: 'transitionend',\n    WebkitTransition: 'webkitTransitionEnd',\n    MozTransition: 'mozTransitionEnd',\n    OTransition: 'oTransitionEnd',\n    msTransition: 'MSTransitionEnd'\n  },\n\n  animationend: {\n    animation: 'animationend',\n    WebkitAnimation: 'webkitAnimationEnd',\n    MozAnimation: 'mozAnimationEnd',\n    OAnimation: 'oAnimationEnd',\n    msAnimation: 'MSAnimationEnd'\n  }\n};\n\nvar endEvents = [];\n\nfunction detectEvents() {\n  var testEl = document.createElement('div');\n  var style = testEl.style;\n\n  if (!('AnimationEvent' in window)) {\n    delete EVENT_NAME_MAP.animationend.animation;\n  }\n\n  if (!('TransitionEvent' in window)) {\n    delete EVENT_NAME_MAP.transitionend.transition;\n  }\n\n  for (var baseEventName in EVENT_NAME_MAP) {\n    if (EVENT_NAME_MAP.hasOwnProperty(baseEventName)) {\n      var baseEvents = EVENT_NAME_MAP[baseEventName];\n      for (var styleName in baseEvents) {\n        if (styleName in style) {\n          endEvents.push(baseEvents[styleName]);\n          break;\n        }\n      }\n    }\n  }\n}\n\nif (typeof window !== 'undefined' && typeof document !== 'undefined') {\n  detectEvents();\n}\n\nfunction addEventListener(node, eventName, eventListener) {\n  node.addEventListener(eventName, eventListener, false);\n}\n\nfunction removeEventListener(node, eventName, eventListener) {\n  node.removeEventListener(eventName, eventListener, false);\n}\n\nvar TransitionEvents = {\n  addEndEventListener: function addEndEventListener(node, eventListener) {\n    if (endEvents.length === 0) {\n      window.setTimeout(eventListener, 0);\n      return;\n    }\n    endEvents.forEach(function (endEvent) {\n      addEventListener(node, endEvent, eventListener);\n    });\n  },\n\n\n  endEvents: endEvents,\n\n  removeEndEventListener: function removeEndEventListener(node, eventListener) {\n    if (endEvents.length === 0) {\n      return;\n    }\n    endEvents.forEach(function (endEvent) {\n      removeEventListener(node, endEvent, eventListener);\n    });\n  }\n};\n\nexport default TransitionEvents;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-animation@1.4.1@css-animation/es/Event.js\n// module id = 24\n// module chunks = 0 1 2 5"],"sourceRoot":""}